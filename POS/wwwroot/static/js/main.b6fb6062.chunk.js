(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{264:function(e,t){},5475:function(e,t,a){e.exports=a(5754)},5480:function(e,t,a){},5742:function(e,t){},5748:function(e,t){},5751:function(e,t,a){},5752:function(e,t,a){},5754:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(25),c=a.n(r),l=(a(5480),a(18)),o=a(19),s=a(21),u=a(20),p=a(22),h=a(5756),m=a(5758),d=a(10),f=a(52),E=a(35),y=a(3),b=a(26),g=a(23),O="/",S=a(28),C=a.n(S),j=a(5757),v=a(68),T=function(e){return e+"_"+v.c},w=function(e){return e+"_"+v.a},R={items:[],selectedReceiptItem:-1,selectedReceiptItemQuantity:1,receiptTotal:"0 z\u0142",isLoading:!1,canCancelReceipt:!1,canRemoveItem:!1,canChangeQuantity:!1,canPay:!1,id:0,isCancelled:!1,isClosed:!1,isOpen:!1,showQuantityDialog:!1,showReceiptCancelDialog:!1},k="receipt/ADD_ITEM",I="receipt/CREATERECEIPT_SUBMIT",D="receipt/GETCURRENTRECEIPT",G="receipt/REMOVE_ITEM",N="receipt/DELETERECEIPT_SUBMIT",P="receipt/DELETERECEIPT_SHOW",x="receipt/CHANGEQUANTITY_SUBMIT",A="receipt/CHANGEQUANTITY_SHOW",z="receipt/SELECTRECEIPTITEM",F="receipt/CHANGEQUANTITY_CANCEL",L="receipt/DELETERECEIPT_CANCEL",W="receipt/SELECTNEXTRECEIPTITEM",_="receipt/SELECTPREVRECEIPTITEM",B="receipt/RESET",M=Object(j.a)(L),Q=Object(j.a)(P),H=Object(j.a)(A),U=Object(j.a)(F),V=Object(j.a)(z,function(e){return e}),K=Object(j.a)(W),q=Object(j.a)(_),Y=(Object(j.a)(I,function(){return C.a.post(O+"api/receipt")}),Object(j.a)(D,function(){return C.a.get(O+"api/receipt")})),Z=Object(j.a)(G,function(e,t){return C.a.delete(O+"api/receipt/"+e+"/"+t)}),J=function(e){return function(t,a){t(a().product.products.findIndex(function(t){return t.ean==e})>-1?{type:k,payload:C.a.post(O+"api/receipt/"+e)}:{type:"products/SHOW_PRODUCTS_DIALOG"})}},X=Object(j.a)(N,function(e){return C.a.delete(O+"api/receipt/"+e)}),$=Object(j.a)(x,function(e,t){return C.a.post(O+"api/receipt/change",{id:e,quantity:t})}),ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).hot_keys=void 0,a.handleNext=function(e){a.props.selectNextReceiptItem()},a.handlePrev=function(e){a.props.selectPrevReceiptItem()},a.el=Object(n.createRef)(),a.state={selectedId:a.props.rows.length||null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&(this.props.rows&&this.props.rows.length>0?this.setState({selectedId:this.props.rows.length}):this.setState({selectedId:null}))}},{key:"componentDidMount",value:function(){this.el&&this.el.current&&this.el.current.scrollIntoView()}},{key:"componentDidUpdate",value:function(){this.el&&this.el.current&&this.el.current.scrollIntoView()}},{key:"selectRow",value:function(e){var t=this;return function(a){t.props.selectReceiptItem(e)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.rows,n=t.classes||{};return i.a.createElement("div",null,i.a.createElement(y.Table,{className:n.table},i.a.createElement(y.TableHead,null,i.a.createElement(y.TableRow,null,i.a.createElement(y.TableCell,{className:n.headerCell},"Lp."),i.a.createElement(y.TableCell,{className:n.headerCell},"EAN"),i.a.createElement(y.TableCell,{className:n.headerCell},"Nazwa"),i.a.createElement(y.TableCell,{className:n.headerCell},"Ilo\u015b\u0107"),i.a.createElement(y.TableCell,{className:n.headerCell},"Jm"),i.a.createElement(y.TableCell,{className:n.headerCell},"Cena"),i.a.createElement(y.TableCell,{className:n.headerCell},"Warto\u015b\u0107"))),i.a.createElement(y.TableBody,null,a&&a.map(function(t){return i.a.createElement(y.TableRow,{key:t.id,hover:!0,onClick:e.selectRow(t.id).bind(e),selected:e.props.selectedReceiptItem==t.id},i.a.createElement(y.TableCell,{className:n.cell},t.ordinalNumber+"."),i.a.createElement(y.TableCell,{className:n.cell,component:"th",scope:"row"},t.ean),i.a.createElement(y.TableCell,{className:n.cell},t.name),i.a.createElement(y.TableCell,{className:n.cell},t.quantity),i.a.createElement(y.TableCell,{className:n.cell},t.unit),i.a.createElement(y.TableCell,{className:n.cell},t.price),i.a.createElement(y.TableCell,{className:n.cell},t.value))}))),i.a.createElement("div",{ref:this.el}))}}]),t}(i.a.Component),te={selectReceiptItem:V,selectNextReceiptItem:K,selectPrevReceiptItem:q},ae=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({table:{paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit},cell:{fontSize:"1rem"},headerCell:{fontSize:"1rem",position:"sticky",top:0,zIndex:10,backgroundColor:"white"}})}),Object(g.b)(function(e){return{selectedReceiptItem:e.receipt.selectedReceiptItem}},te))(ee),ne=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(y.List,null,i.a.createElement(y.ListItem,null,i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h6"},"Suma")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h2"},this.props.receiptTotal)))))}}]),t}(i.a.Component),ie=Object(E.withStyles)(function(e){return Object(E.createStyles)({})})(ne),re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={selectedEan:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.classes||{};return i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,className:e.detailsGrid,md:9},i.a.createElement(ae,{rows:this.props.items})),i.a.createElement(y.Grid,{item:!0,md:3,className:e.summaryGrid},i.a.createElement(ie,{receiptTotal:this.props.receiptTotal})))}}]),t}(i.a.Component),ce=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({summaryGrid:{borderLeft:"1px solid lightgray"},detailsGrid:{padding:1*e.spacing.unit,minHeight:"500px",maxHeight:"500px",overflowY:"scroll",backgroundColor:"white"}})}),Object(g.b)(function(e){return Object(d.a)({},e.receipt)},{}))(re),le=a(53),oe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(y.Grid,{item:!0,md:2},i.a.createElement(y.Button,{fullWidth:!0,variant:"outlined",size:"large",className:e.button,onClick:this.props.onClick,disabled:this.props.disabled},i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:12},this.props.children),i.a.createElement(y.Grid,{item:!0,md:12},this.props.text))))}}]),t}(i.a.Component),se=Object(E.withStyles)(function(e){return Object(E.createStyles)({button:{height:14*e.spacing.unit,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}})})(oe),ue={endMoney:0,startMoney:0,startDeposit:0,numberOfReceipts:0,cancelledReceiptsCount:0,removedItemsCount:0,sales:0,isCreated:!1,isOpen:!1,isLoading:!1,showStartShift:!1,showEndShift:!1,showDialog:!1,canOpenShift:!0,canCloseShift:!1,id:0},pe="shift/STARTSHIFT_SHOW",he="shift/GETCURRENTSHIFT",me="shift/CLOSESHIFT_SHOW",de="shift/CLOSESHIFT_CANCEL",fe="shift/CLOSESHIFT_SUBMIT",Ee="shift/STARTSHIFT_SUBMIT",ye="shfit/STARTSHIFT_CANCEL",be="shift/STARTSHIFTEXISTING_SHOW",ge=Object(j.a)(pe,function(){return C.a.post(O+"api/shift")}),Oe=Object(j.a)(he,function(){return C.a.get(O+"api/shift")}),Se=Object(j.a)(Ee,function(e,t){return C.a.post(O+"api/shift/start",{shiftId:e,depositAmount:t})}),Ce=Object(j.a)(ye),je=Object(j.a)(me),ve=Object(j.a)(de),Te=Object(j.a)(fe,function(){return C.a.post(O+"api/shift/close")}),we=Object(j.a)(be),Re={products:[],showProductDialog:!1,isLoading:!1,errorMessage:"",selectedProduct:"",canSearchProduct:!0,searchEan:""},ke="products/FETCH_PRODUCTS",Ie="products/SHOW_PRODUCTS_DIALOG",De="products/PICK_PRODUCT",Ge="products/CLOSE_PRODUCTS_DIALOG",Ne=Object(j.a)(ke,function(){return C.a.get(O+"api/product")}),Pe=Object(j.a)(Ge),xe=Object(j.a)(Ie),Ae={showPayDialog:!1,amount:0,amountPayed:0,change:0,isLoading:!1,canPay:!1,id:0},ze="payment/PAYDIALOG_SHOW",Fe="payment/PAYDIALOG_CANCEL",Le="payment/PAYDIALOG_SUBMIT",We=Object(j.a)(ze,function(e){return C.a.post(O+"api/payment")}),_e=Object(j.a)(Fe),Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).props.getCurrentShift(),a.props.getCurrentReceipt(),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.shift;return t=t||{},i.a.createElement(y.Grid,{container:!0,spacing:8,className:t.mainGrid},i.a.createElement(se,{text:"Znajd\u017a produkt [Ins]",disabled:!a.isOpen,onClick:this.props.handleProductList},i.a.createElement(le.f,{className:t.icon})),i.a.createElement(se,{text:"Zmie\u0144 ilo\u015b\u0107 [F6]",disabled:!this.props.canChangeQuantity,onClick:this.props.handleChangeQuantity},i.a.createElement(le.d,{className:t.icon})),i.a.createElement(se,{text:"Zap\u0142ata [F12]",disabled:!this.props.canPay,onClick:this.props.handlePay},i.a.createElement(le.b,{className:t.icon})),i.a.createElement(se,{text:"Usu\u0144 pozycj\u0119 [F3]",disabled:!this.props.canRemoveItem,onClick:this.props.handleRemoveReceiptItem},i.a.createElement(le.e,{className:t.icon})),i.a.createElement(se,{text:"Anuluj paragon [F4]",disabled:!this.props.canCancelReceipt,onClick:this.props.handleCancelReceipt},i.a.createElement(le.a,{className:t.icon})),i.a.createElement(se,{text:a.isOpen?"Zamknij zmian\u0119":"Otw\xf3rz zmian\u0119",disabled:a.isOpen?!a.canCloseShift:!a.canOpenShift,onClick:a.isOpen?this.props.handleCloseShift:this.props.handleOpenShift},i.a.createElement(le.c,{className:t.icon})))}}]),t}(i.a.Component),Me={payShowDialog:We,productDialogShow:xe,deleteReceiptShow:Q,changeQuantityShow:H,endShiftShow:je,startShiftShow:ge,getCurrentShift:Oe,startShiftExistingShow:we,removeItemFromReceipt:Z,getCurrentReceipt:Y},Qe=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({mainGrid:{paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit},icon:{marginRight:e.spacing.unit,fontSize:54}})}),Object(g.b)(function(e){return{shift:e.shift,receipt:e.receipt,canSearchProduct:e.product.canSearchProduct,canChangeQuantity:e.receipt.canChangeQuantity,canPay:e.receipt.canPay,canRemoveItem:e.receipt.canRemoveItem,canCancelReceipt:e.receipt.canCancelReceipt}},Me))(Be),He=a(259),Ue=a.n(He);function Ve(e){return i.a.createElement(y.Slide,Object.assign({direction:"up"},e))}var Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={amount:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes||{};return i.a.createElement("div",null,this.props.showStartShift?i.a.createElement(y.Dialog,{open:this.props.showDialog,className:t.dialog,TransitionComponent:Ve,maxWidth:"xl"},i.a.createElement(y.DialogTitle,{id:"form-dialog-title"},"Otwarcie zmiany"),i.a.createElement(y.DialogContent,null,i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:9},i.a.createElement(y.Typography,{variant:"h4"},"Aktualna kwota na stanowisku:")),i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,{variant:"h4"},this.props.startMoney))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,null,"Wp\u0142ata pocz\u0105tkowa"))),i.a.createElement(y.Grid,{item:!0,md:9},i.a.createElement(y.TextField,{autoFocus:!0,margin:"dense",id:"amount",label:"Kwota pocz\u0105tkowa",type:"number",value:this.state.amount,onKeyDown:function(t){return e.handleEnter(t)},onChange:function(t){return e.handleChangeAmount(t)},fullWidth:!0})),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",onClick:function(t){return e.handleSubmitStartShift(t)}},"Zatwierd\u017a")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",onClick:function(t){return e.handleCancelStartShift(t)}},"Anuluj"))))):i.a.createElement(y.Dialog,{open:this.props.showDialog,className:t.dialog,TransitionComponent:Ve},i.a.createElement(y.DialogTitle,{id:"form-dialog-title"},"Zamkni\u0119cie zmiany"),i.a.createElement(y.DialogContent,null,i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Kwota z przeniesienia:")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},this.props.startMoney))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Wp\u0142ata pocz\u0105tkowa:"))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Ilo\u015b\u0107 paragon\xf3w:")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},this.props.numberOfReceipts))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Ilo\u015b\u0107 anulowanych paragon\xf3w:")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},this.props.cancelledReceiptsCount))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Ilo\u015b\u0107 anulowanych pozycji:")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},this.props.removedItemsCount))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Sprzeda\u017c:")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},this.props.sales))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,{variant:"h4"},"Wp\u0142ata pocz\u0105tkowa"))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Typography,{variant:"h4"},"Pozostaje:"))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",onClick:function(t){return e.handleSubmitCloseShift(t)}},"Zamknij zmian\u0119")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",onClick:function(t){return e.handleCancelCloseShift(t)}},"Anuluj"))))))}},{key:"handleEnter",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.handleSubmitStartShift())}},{key:"handleChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleCancelStartShift",value:function(e){this.props.startShiftShowCancel()}},{key:"handleSubmitStartShift",value:function(e){this.props.startShiftSubmit(this.props.id,Number(this.state.amount))}},{key:"handleSubmitCloseShift",value:function(e){this.props.endShiftSubmit()}},{key:"handleCancelCloseShift",value:function(e){this.props.endShiftShowCancel()}}]),t}(i.a.Component),qe={startShift:ge,endShiftShow:je,endShiftSubmit:Te,endShiftShowCancel:ve,startShiftSubmit:Se,startShiftShowCancel:Ce},Ye=Ue()(Object(E.withStyles)(function(e){return Object(E.createStyles)({dialog:{minWidth:1e3}})}),Object(g.b)(function(e){return Object(d.a)({},e.shift)},qe))(Ke),Ze=a(260),Je=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={name:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handlePickProduct",value:function(){this.props.addItemToReceipt(this.state.name),this.setState({name:""})}},{key:"handleChange",value:function(e){var t=this;return function(a){if("Enter"!==a.key)return t.setState(Object(f.a)({},e,a.target.value));t.handlePickProduct()}}},{key:"render",value:function(){var e=this,t=this.props.classes||{};return i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:8},i.a.createElement(y.TextField,{autoFocus:!0,fullWidth:!0,id:"standard-name",label:"Dodaj produkt",variant:"outlined",className:t.textField,InputProps:{className:t.inputField},InputLabelProps:{className:t.label},value:this.state.name,disabled:!this.props.shift.isOpen,onKeyPress:function(t){return e.handleEnterKey(t)},onChange:function(t){return e.handleEanChange(t)},margin:"normal"})))}},{key:"handleEnterKey",value:function(e){"Enter"===e.key&&this.handlePickProduct()}},{key:"handleEanChange",value:function(e){this.setState(Object(f.a)({},"name",e.target.value))}}]),t}(i.a.Component),Xe={addItemToReceipt:J},$e=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({textField:{marginLeft:4*e.spacing.unit,marginTop:4*e.spacing.unit,marginBottom:4*e.spacing.unit},inputField:{fontSize:e.typography.h4.fontSize},label:{fontSize:e.typography.h4.fontSize}})}),Object(g.b)(function(e){return Object(d.a)({},e.product,{shift:e.shift})},Xe))(Je),et=a(263),tt=a.n(et),at={eanValue:""},nt=[{name:"ean",label:"EAN",options:{filter:!0,sort:!0}},{name:"name",label:"Nazwa",options:{filter:!0,sort:!0}},{name:"price",label:"Cena",options:{filter:!1,sort:!1}},{name:"tax",label:"VAT",options:{filter:!1,sort:!1}},{name:"unit",label:"Jm",options:{filter:!1,sort:!1}}],it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).props.productFetch(),a.state=at,a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleTextChange",value:function(e){this.setState({eanValue:e.target.value})}},{key:"handleCancel",value:function(e){this.props.productDialogClose()}},{key:"handleSubmit",value:function(e){this.state.eanValue&&""!=this.state.eanValue&&(this.props.addItemToReceipt(this.state.eanValue),this.props.productDialogClose(),this.setState({eanValue:""}))}},{key:"handleRowClick",value:function(e,t){this.setState({eanValue:e[0]})}},{key:"options",value:function(){return{filterType:"checkbox",responsive:"scroll",download:!1,print:!1,filter:!1,sort:!1,selectableRows:!1,onRowClick:this.handleRowClick.bind(this),elevation:0}}},{key:"render",value:function(){var e=this,t=this.props.classes||{};return i.a.createElement(y.Dialog,{open:this.props.showProductDialog,maxWidth:"xl"},i.a.createElement(y.DialogTitle,{id:"form-dialog-title"},"Wybierz produkt"),i.a.createElement(y.DialogContent,{className:t.dialog},i.a.createElement(y.Grid,{container:!0,className:t.grid,spacing:8},i.a.createElement(y.Grid,{item:!0,md:8},i.a.createElement(y.TextField,{autoFocus:!0,margin:"dense",id:"amount",onChange:function(t){return e.handleTextChange(t)},value:this.state.eanValue,label:"EAN",type:"text",fullWidth:!0})),i.a.createElement(y.Grid,{item:!0,md:2},i.a.createElement(y.Button,{color:"primary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleSubmit(t)},disabled:this.state&&""===this.state.eanValue},"Zatwierd\u017a")),i.a.createElement(y.Grid,{item:!0,md:2},i.a.createElement(y.Button,{color:"secondary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleCancel(t)}},"Anuluj"))),i.a.createElement(tt.a,{title:"",data:this.props.products.map(function(e){return[e.ean,e.name,e.price,e.tax,e.unit]}),columns:nt,options:this.options()})))}}]),t}(i.a.Component),rt={productFetch:Ne,productDialogClose:Pe,addItemToReceipt:J},ct=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({dialog:{minWidth:1e3},grid:{marginBottom:2*e.spacing.unit}})}),Object(g.b)(function(e){return Object(d.a)({},e.product)},rt))(it),lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={quantity:1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleTextChange",value:function(e){var t=Number(e.target.value);isNaN(t)||this.setState({quantity:t})}},{key:"handleCancel",value:function(e){this.props.changeQuantityCancel()}},{key:"handleSubmit",value:function(e){this.props.changeQuantitySubmit(this.props.selectedReceiptItem||1,this.state.quantity)}},{key:"handleFocus",value:function(e){e.target.select()}},{key:"componentWillReceiveProps",value:function(e){e.selectedReceiptItemQuantity!==this.props.selectedReceiptItemQuantity&&this.setState({quantity:e.selectedReceiptItemQuantity})}},{key:"handleEnterKey",value:function(e){"Enter"===e.key?(e.preventDefault(),this.handleSubmit()):"Escape"===e.key&&(e.preventDefault(),this.handleCancel())}},{key:"render",value:function(){var e=this,t=this.props.classes||{};return i.a.createElement(y.Dialog,{open:this.props.showQuantityDialog,maxWidth:!1},i.a.createElement(y.DialogTitle,{id:"form-dialog-title"},"Podaj ilo\u015b\u0107"),i.a.createElement(y.DialogContent,null,i.a.createElement(y.Grid,{container:!0,className:t.grid,spacing:8},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.TextField,{InputProps:{className:t.inputField},autoFocus:!0,margin:"dense",id:"amount",onKeyDown:function(t){return e.handleEnterKey(t)},onChange:function(t){return e.handleTextChange(t)},onFocus:function(t){return e.handleFocus(t)},value:this.state.quantity,type:"number",fullWidth:!0})),i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Button,{color:"primary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleSubmit(t)},disabled:this.state.quantity<=0},"Zatwierd\u017a")),i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Button,{color:"secondary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleCancel(t)}},"Anuluj")))))}}]),t}(i.a.Component),ot={changeQuantityCancel:U,changeQuantitySubmit:$},st=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({dialog:{minWidth:500},grid:{marginBottom:2*e.spacing.unit},inputField:{fontSize:e.typography.h4.fontSize}})}),Object(g.b)(function(e){return Object(d.a)({},e.receipt)},ot))(lt),ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={quantity:1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleTextChange",value:function(e){var t=Number(e.target.value);isNaN(t)||this.setState({quantity:t})}},{key:"handleCancel",value:function(e){this.props.deleteReceiptCancel()}},{key:"handleSubmit",value:function(e){this.props.deleteReceiptSubmit(this.props.id)}},{key:"handleFocus",value:function(e){e.target.select()}},{key:"handleEnterKey",value:function(e){"Enter"===e.key?(e.preventDefault(),this.handleSubmit()):"Escape"===e.key&&(e.preventDefault(),this.handleCancel())}},{key:"render",value:function(){var e=this,t=this.props.classes||{};return i.a.createElement(y.Dialog,{open:this.props.showReceiptCancelDialog,maxWidth:!1},i.a.createElement(y.DialogContent,null,i.a.createElement(y.Grid,{container:!0,className:t.grid},i.a.createElement(y.Typography,{variant:"h4"},"Czy na pewno usun\u0105\u0107 paragon?")),i.a.createElement(y.Grid,{container:!0,spacing:32},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleSubmit(t)},disabled:this.state.quantity<=0},"Tak")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",size:"large",variant:"contained",fullWidth:!0,onClick:function(t){return e.handleCancel(t)}},"Nie")))))}}]),t}(i.a.Component),pt={deleteReceiptSubmit:X,deleteReceiptCancel:M},ht=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({dialog:{minWidth:500},grid:{marginBottom:2*e.spacing.unit},inputField:{fontSize:e.typography.h4.fontSize}})}),Object(g.b)(function(e){return Object(d.a)({},e.receipt)},pt))(ut),mt=a(100);function dt(e){return i.a.createElement(y.Slide,Object.assign({direction:"up"},e))}var ft=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={amount:0},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.receiptTotal===this.props.receiptTotal&&e.amount===this.props.amount||this.setState({amountString:e.receiptTotal,amount:e.amount})}},{key:"render",value:function(){var e=this,t=this.props.classes||{},a=this.state&&this.state.amount?Number(this.state.amount):0;return i.a.createElement(y.Dialog,{open:this.props.showPayDialog,TransitionComponent:dt,maxWidth:"xl"},i.a.createElement(y.DialogTitle,{id:"form-dialog-title"},"P\u0142atno\u015b\u0107"),i.a.createElement(y.DialogContent,{className:t.paper},i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,{variant:"h4"},"Do zap\u0142aty: ")),i.a.createElement(y.Grid,{item:!0,md:9},i.a.createElement(y.Typography,{variant:"h3"},this.props.receiptTotal))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,{variant:"h4"},"Wp\u0142ata:")),i.a.createElement(y.Grid,{item:!0,md:9},i.a.createElement(y.TextField,{autoFocus:!0,margin:"dense",id:"amount",label:"Kwota wp\u0142aty",type:"number",value:this.state.amount,onFocus:function(t){return e.handleFocus(t)},onKeyPress:function(t){return e.handleKeys(t)},onChange:function(t){return e.handleChange(t)}}))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:3},i.a.createElement(y.Typography,{variant:"h4"},"Reszta: ")),i.a.createElement(y.Grid,{item:!0,md:9},i.a.createElement(y.Typography,{variant:"h4"},i.a.createElement(mt.a,{value:a<this.props.amount?0:a-this.props.amount,style:"currency",currency:"PLN"})))),i.a.createElement(y.Grid,{container:!0},i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"primary",size:"large",variant:"contained",disabled:a<this.props.amount,onClick:function(t){return e.handleSubmit(t)}},"Zatwierd\u017a")),i.a.createElement(y.Grid,{item:!0,md:6},i.a.createElement(y.Button,{color:"secondary",size:"large",variant:"contained",onClick:function(t){return e.handleCancel(t)}},"Anuluj")))))}},{key:"handleCancel",value:function(e){this.props.payCancelDialog()}},{key:"handleSubmit",value:function(e){this.props.paySubmit(this.props.id,this.state.amount)}},{key:"handleChange",value:function(e){this.setState({amount:e.target.value})}},{key:"handleKeys",value:function(e){"Enter"===e.key?(e.preventDefault(),this.handleSubmit()):"Escape"===e.key&&(e.preventDefault(),this.handleCancel())}},{key:"handleFocus",value:function(e){e.target.select()}}]),t}(i.a.Component),Et={paySubmit:function(e,t){return function(a,n){C.a.post(O+"api/payment/pay",{paymentId:e,amount:t}).then(function(e){a({type:"receipt/RESET"}),a({type:w(Le)})})}},payCancelDialog:_e},yt=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({paper:{minWidth:900}})}),Object(g.b)(function(e){return Object(d.a)({},e.payment,{receiptTotal:e.receipt.receiptTotal})},Et))(ft),bt={PRODUCTS:"ins",QUANTITY:"f6",REMOVE_ITEM:"f3",REMOVE_RECEIPT:"f4",PAY:"f12"},gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handlers=void 0,a.handle={handleProductList:function(e){a.props.shift.isOpen&&a.props.productDialogShow()},handleChangeQuantity:function(e){a.props.canChangeQuantity&&(e.preventDefault(),a.props.changeQuantityShow())},handlePay:function(e){a.props.canPay&&(e.preventDefault(),a.props.payShowDialog(a.props.receipt.id))},handleRemoveReceiptItem:function(e){a.props.canRemoveItem&&(e.preventDefault(),a.props.removeItemFromReceipt(a.props.receipt.id,a.props.receipt.selectedReceiptItem||1))},handleCancelReceipt:function(e){a.props.canCancelReceipt&&a.props.deleteReceiptShow()},handleCloseShift:function(e){a.props.shift.canCloseShift&&a.props.endShiftShow()},handleOpenShift:function(e){a.props.shift.canOpenShift&&(a.props.shift.isCreated?a.props.startShiftExistingShow():a.props.startShiftShow())}},a.handlers={PRODUCTS:a.handle.handleProductList,QUANTITY:a.handle.handleChangeQuantity,REMOVE_ITEM:a.handle.handleRemoveReceiptItem,REMOVE_RECEIPT:a.handle.handleCancelReceipt,PAY:a.handle.handlePay},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",null,i.a.createElement(y.AppBar,{position:"static",color:"primary"},i.a.createElement(y.Toolbar,{variant:"dense"},i.a.createElement(y.Typography,{variant:"h6",color:"inherit"},"Biovert POS"))),i.a.createElement("div",{className:e.layout},i.a.createElement(Ze.HotKeys,{keyMap:bt,handlers:this.handlers},i.a.createElement(y.Paper,{className:e.paper},i.a.createElement(Qe,this.handle)),i.a.createElement(y.Paper,{className:e.paper},i.a.createElement(ce,null)),i.a.createElement(y.Paper,{className:e.paper},i.a.createElement($e,null))),i.a.createElement(Ye,null),i.a.createElement(ct,null),i.a.createElement(st,null),i.a.createElement(ht,null),i.a.createElement(yt,null)))}}]),t}(i.a.Component),Ot={payShowDialog:We,productDialogShow:xe,deleteReceiptShow:Q,changeQuantityShow:H,endShiftShow:je,startShiftShow:ge,getCurrentShift:Oe,startShiftExistingShow:we,removeItemFromReceipt:Z,getCurrentReceipt:Y},St=Object(b.a)(Object(E.withStyles)(function(e){return Object(E.createStyles)({layout:Object(f.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit,marginTop:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit}),divider:{marginTop:2*e.spacing.unit},paper:{marginBottom:2*e.spacing.unit}})}),Object(g.b)(function(e){return Object(d.a)({},e)},Ot))(gt),Ct=(a(5751),a(5752),a(47)),jt=a(266),vt=a(267),Tt=a.n(vt),wt=a(268),Rt=Object(Ct.combineReducers)({payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w(ze):return Object(d.a)({},e,t.payload.data,{showPayDialog:!0});case w(Le):case Fe:return Object(d.a)({},e,{showPayDialog:!1})}return e},receipt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:var a=n=e.items.findIndex(function(t){return t.id===e.selectedReceiptItem});return n>0&&a--,Object(d.a)({},e,{selectedReceiptItem:a<0?a:e.items[a].id});case W:var n;return a=n=e.items.findIndex(function(t){return t.id===e.selectedReceiptItem}),n<e.items.length-1&&a++,Object(d.a)({},e,{selectedReceiptItem:a<0?a:e.items[a].id});case A:var i=e.items.find(function(t){return t.id==e.selectedReceiptItem}),r=i?i.quantity:1;return Object(d.a)({},e,{showQuantityDialog:!0,selectedReceiptItemQuantity:r});case B:return Object(d.a)({},R);case P:return Object(d.a)({},e,{showReceiptCancelDialog:!0});case L:return Object(d.a)({},e,{showReceiptCancelDialog:!1});case F:return Object(d.a)({},e,{showQuantityDialog:!1});case z:return Object(d.a)({},e,{selectedReceiptItem:t.payload});case w(N):return Object(d.a)({},R);case w(I):return Object(d.a)({},e,t.payload.data);case w(D):var c=(l=t.payload.data).items&&l.items.length>0?l.items[l.items.length-1].id:null;return Object(d.a)({},e,t.payload.data,{selectedReceiptItem:c});case w(x):return Object(d.a)({},e,t.payload.data,{showQuantityDialog:!1});case w(k):case w(G):var l;return c=(l=t.payload.data).items&&l.items.length>0?l.items[l.items.length-1].id:null,Object(d.a)({},e,t.payload.data,{selectedReceiptItem:c})}return e},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke+"_"+v.b:return Object(d.a)({},e,{isLoading:!0});case w(ke):return Object(d.a)({},e,{products:t.payload.data,isLoading:!1});case T(ke):return Object(d.a)({},e,{errorMessage:t.payload,isLoading:!1});case Ie:return Object(d.a)({},e,{showProductDialog:!0,searchEan:""});case Ge:return Object(d.a)({},e,{showProductDialog:!1});case De:return Object(d.a)({},e,{showProductDialog:!1,selectedProduct:t.payload})}return e},shift:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w(fe):return Object(d.a)({},e,t.payload.data,{showDialog:!1,canOpenShift:!0});case de:case ye:return Object(d.a)({},e,{showDialog:!1});case w(Ee):return Object(d.a)({},e,t.payload.data,{canOpenShift:!1,canCloseShift:!0,showDialog:!1});case w(he):var a=t.payload.data;return Object(d.a)({},e,a,{canCloseShift:a.isOpen,canOpenShift:a.isCreated&&!a.isOpen});case T(he):return Object(d.a)({},e,{isOpen:!1,canOpenShift:!0});case w(pe):return Object(d.a)({},e,t.payload.data,{showDialog:!0,showStartShift:!0,showEndShift:!1});case be:return Object(d.a)({},e,{showDialog:!0,showStartShift:!0,showEndShift:!1});case me:return Object(d.a)({},e,{showDialog:!0,showEndShift:!0,showStartShift:!1});default:return e}}}),kt=function(e){return Object(Ct.createStore)(Rt,e,Object(jt.composeWithDevTools)(Object(Ct.applyMiddleware)(Object(v.d)(),Tt.a,wt.a)))}(),It=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:e.root},i.a.createElement(g.a,{store:kt},i.a.createElement(mt.b,{locale:"pl",defaultLocale:"pl"},i.a.createElement(h.a,null,i.a.createElement(m.a,{path:"/",component:St})))))}}]),t}(n.Component),Dt=Object(E.withStyles)(function(e){return Object(E.createStyles)({root:{flexGrow:1}})})(It);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gt=Object(E.createMuiTheme)({palette:{primary:{main:"#2E7D32"},secondary:{main:"#FFB300"},error:{main:"#f44336"}}});c.a.render(i.a.createElement(E.MuiThemeProvider,{theme:Gt},i.a.createElement(Dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5475,1,2]]]);
//# sourceMappingURL=main.b6fb6062.chunk.js.map